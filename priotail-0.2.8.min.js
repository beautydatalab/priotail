function getQueryString(){var t=window.location.search.substr(1).split("&");if(""==t)return{};for(var e={},o=0;o<t.length;++o){var i=t[o].split("=",2);1==i.length?e[i[0]]="":e[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return e}function sleep(t){return new Promise(e=>setTimeout(e,t))}var priotailHttpRequest=new XMLHttpRequest;async function priotailArrange(){if(priotailHttpRequest.readyState===XMLHttpRequest.DONE)if(200===priotailHttpRequest.status){console.log(priotailHttpRequest.responseText);const t=JSON.parse(priotailHttpRequest.responseText),e=t.priority_detail[0].type,o=t.priority_detail[0].data,i=t.priority_detail[0].hide_origin;let r=document.getElementById("priotail_section"),a=1;for(;!r&&a<12;)console.log(a++),await sleep(1e3),r=document.getElementById("priotail_section");switch(e){case"IMAGE":o.map((t,e)=>{const o=document.createElement("img");o.id="priotail_image_"+e,o.src=t,o.style="position: relative; height: 100%; box-sizing: border-box; border-radius: 0px;",r.appendChild(o)});break;case"HTML_TAG":r.innerHTML=o}if(i){document.getElementById("priotail_original_detail_section").style="display: none;"}}else console.log("something wrong by priotail")}async function priogoryArrange(){if(priotailHttpRequest.readyState===XMLHttpRequest.DONE)if(200===priotailHttpRequest.status){console.log(priotailHttpRequest.responseText);const t=JSON.parse(priotailHttpRequest.responseText).data;console.log("priogoryList",t);for(let e in t){const t=e.targets,o=e.qs;for(let e of t){let t=document.getElementsByName("anchorBoxName_"+e),i=1;for(;t.length<1&&i<12;)console.log(i++),await sleep(1e3),t=document.getElementsByName("anchorBoxName_"+e);t.length<1?console.log("not founded"):t[0].href=t[0].href.include("?")?t[0].href+"&"+o:t[0].href+"?"+o}}}else console.log("something wrong by priotail")}function priotail(){var t=getQueryString(),e=t.pt_type,o=t.pt_shop,i=t.pt_no,r=t.pt_tag;switch(e){case"priotail":priotailHttpRequest.onreadystatechange=priotailArrange,priotailHttpRequest.open("GET",`https://priotail.development.hitple.com/${o}/${i}/${r}`,!0),priotailHttpRequest.send();break;case"priogory":priotailHttpRequest.onreadystatechange=priogoryArrange,priotailHttpRequest.open("GET",`https://priotail.development.hitple.com/priogory/${o}/${i}/${r}`,!0),priotailHttpRequest.send();break;default:r&&(priotailHttpRequest.onreadystatechange=priotailArrange,priotailHttpRequest.open("GET",`https://priotail.development.hitple.com/${o}/${i}/${r}`,!0),priotailHttpRequest.send())}}priotail();
